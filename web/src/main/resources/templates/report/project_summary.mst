<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1280" />
    <title>项目总结</title>
    <link rel="stylesheet" type="text/css" href="/public/lib/foundation.css">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"
      integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
      crossorigin="anonymous"></script>

  </head>
  <body>
    <div class="grid-container">
      <div class="grid-x">

        <div class="cell">

          <div class="top-bar">
            <div class="top-bar-left">
              <ul class="dropdown menu" data-dropdown-menu>
                <li class="menu-text">禅道PLUS</li>
                <li class="is-active"><a href="/" >项目概况</a></li>
                <li><a href="/report/project">项目明细</a></li>
              </ul>
            </div>
          </div>

        </div>
      </div>


      <div class="grid-x margin-vertical-1">
        <div class="cell small-4 medium-4 large-4">
           <label>开始时间
               <input type="text" placeholder="开始时间">
           </label>
        </div>

        <div class="cell small-4 medium-4 large-4 small-offset-1 medium-offset-1 large-offset-1">
           <label> 结束时间
               <input type="text" placeholder="结束时间">
           </label>
        </div>

        <div class="cell small-2 medium-2 large-2">
          <div class="grid-x grid-padding-y">
            <div class="cell small-offset-2 small-8 medium-4 large-4">
              <button type="button" class="button expanded">查询</button>
            </div>
          </div>
        </div>
      </div>

      <div class="grid-x">
        <div class="cell">
            <div class="charts" id="project-summary"></div>
        </div>
      </div>

      <div class="grid-x margin-top-1">
        <div class="cell">
            <div class="charts" id="member-consumed-summary"></div>
        </div>
      </div>

      <div class="grid-x margin-top-1">
        <div class="cell">
            <div class="charts" id="project-timerange-summary"></div>
        </div>
      </div>

    </div>


    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="/public/scripts/common-charts.js"></script>
    <script src="/public/scripts/projectDetail.js"></script>
    <script src="/public/scripts/summary.js"></script>

    <script charset="utf-8">
      var projectSummary = [];

      {{#projectStats}}
        projectSummary['{{name}}'] = []
        projectSummary['{{name}}'] = projectSummary['{{name}}'].concat({
          seriesName: '需求数',
          value:
          {{#totalStories}}{{totalStories}}{{/totalStories}}{{^totalStories}}0{{/totalStories}},
          yAxis: 1
        },
        {
          seriesName: 'BUG数',
          value: {{#totalBugs}}{{totalBugs}}{{/totalBugs}}{{^totalBugs}}0{{/totalBugs}},
          yAxis: 1
        },
        {
          seriesName: '成员数',
          value:
          {{#totalMembers}}{{totalMembers}}{{/totalMembers}}{{^totalMembers}}0{{/totalMembers}},
          yAxis: 1
        },
        {
          seriesName: '耗时',
          value:
          {{#totalTimeUsage}}{{totalTimeUsage}}{{/totalTimeUsage}}{{^totalTimeUsage}}0{{/totalTimeUsage}}
        });

      {{/projectStats}}


      // pie for member summary
      var memberConsumedSummary = [];
      {{#memberConsumedStats}}
        memberConsumedSummary.push({name: '{{name}}', value: {{tolConsumedTime}} })
      {{/memberConsumedStats}}

      // column for project stat timerange
      var projectTimerangeSummary= [];
      {{#timerangeProjectStats}}
        projectTimerangeSummary['{{timerange}}'] = []
        projectTimerangeSummary['{{timerange}}'] = projectTimerangeSummary['{{timerange}}'].concat(
        {
          seriesName: '项目数',
          value:{{totalProjects}}
        });

      {{/timerangeProjectStats}}
    </script>
  </body>
</html>
